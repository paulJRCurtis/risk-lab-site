<!doctype html><html class=no-js lang=en-us prefix="og: https://ogp.me/ns# fb: https://ogp.me/ns/fb#"><html lang=en class="js csstransforms3d"><head><meta charset=utf-8><meta property="og:title" content="Risk & Compliance Labs"><meta property="og:type" content="website"><meta property="og:url" content><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><meta name=generator content="Hugo 0.80.0"><meta name=description content="Hands on labs for those interested in risk & assurance, and compliance."><meta name=author content="Amazon AWS"><link rel="shortcut icon" href=https://a0.awsstatic.com/libra-css/images/site/fav/favicon.ico type=image/ico><link rel=icon href=https://a0.awsstatic.com/libra-css/images/site/fav/favicon.ico type=image/ico><title>Introduction :: Risk & Compliance Labs</title><link href=../css/nucleus.css rel=stylesheet><link href=../css/fontawesome-all.min.css rel=stylesheet><link href=../css/hybrid.css rel=stylesheet><link href=../css/featherlight.min.css rel=stylesheet><link href=../css/perfect-scrollbar.min.css rel=stylesheet><link href=../css/auto-complete.css rel=stylesheet><link href=../css/atom-one-dark-reasonable.css rel=stylesheet><link href=../css/theme.css rel=stylesheet><link href=../css/hugo-theme.css rel=stylesheet><link href=../css/theme-aws.css rel=stylesheet><script src=../js/jquery-3.3.1.min.js></script><style>:root #header+#content>#left>#rlblock_left{display:none!important}:not(pre)>code+span.copy-to-clipboard{display:none}</style></head><body data-url=../7-preventative-controls-codepipeline/1-intro.html><nav id=sidebar><div id=header-wrapper><div id=header><div><a href=../ title="Go home"><img style=vertical-align:middle src=../images/logo.png height=70px></a></div></div><div class=searchbox><label for=search-by><i class="fas fa-search"></i></label><input data-search-input id=search-by type=search placeholder=Search...>
<span data-search-clear><i class="fas fa-times"></i></span></div><script type=text/javascript src=../js/lunr.min.js></script><script type=text/javascript src=../js/auto-complete.js></script><script type=text/javascript>var baseurl="";</script><script type=text/javascript src=../js/search.js></script></div><div class=highlightable><ul class=topics><li data-nav-id=/1-start-workshop.html title="Start the Workshop" class=dd-item><a href=../1-start-workshop.html><b></b>Start the Workshop</a><ul><li data-nav-id=/1-start-workshop/on-your-own.html title="In your own account" class=dd-item><a href=../1-start-workshop/on-your-own.html><b></b>On your own</a><ul><li data-nav-id=/1-start-workshop/on-your-own/create-an-aws-account.html title="Create an AWS Account" class=dd-item><a href=../1-start-workshop/on-your-own/create-an-aws-account.html>Create an AWS Account</a></li></ul></li><li data-nav-id=/1-start-workshop/at-an-aws-event.html title="At an AWS Event" class=dd-item><a href=../1-start-workshop/at-an-aws-event.html>At an AWS Event</a><ul><li data-nav-id=/1-start-workshop/at-an-aws-event/aws-workshop-portal.html title="AWS Workshop Portal" class=dd-item><a href=../1-start-workshop/at-an-aws-event/aws-workshop-portal.html><b></b>AWS Workshop Portal</a></li></ul></li></ul></li><li data-nav-id=/2-know-the-console.html title="Getting to Know the Console" class=dd-item><a href=../2-know-the-console.html>Getting to Know the Console</a></li><li data-nav-id=/3-aws-compliance-reports.html title="Accessing AWS Compliance Reports" class=dd-item><a href=../3-aws-compliance-reports.html>AWS Compliance Reports</a><ul><li data-nav-id=/3-aws-compliance-reports/1-intro.html title=Introduction class=dd-item><a href=../3-aws-compliance-reports/1-intro.html><b>1. </b>Introduction</a></li><li data-nav-id=/3-aws-compliance-reports/2-access-a-report.html title="Access a report" class=dd-item><a href=../3-aws-compliance-reports/2-access-a-report.html><b>2. </b>Access a report</a></li><li data-nav-id=/3-aws-compliance-reports/3-interpret-results.html title="Interpreting the results" class=dd-item><a href=../3-aws-compliance-reports/3-interpret-results.html><b>3. </b>Interpreting the results</a></li><li data-nav-id=/3-aws-compliance-reports/4-shared-responsibility.html title="Deep Dive: Shared Responsibility" class=dd-item><a href=../3-aws-compliance-reports/4-shared-responsibility.html><b>4. </b>Deep Dive: Shared Responsibility</a></li></ul></li><li data-nav-id=/4-detective-controls-config.html title="Detective Controls with Config" class=dd-item><a href=../4-detective-controls-config.html>Detective Controls with Config</a><ul><li data-nav-id=/4-detective-controls-config/1-intro.html title=Introduction class=dd-item><a href=../4-detective-controls-config/1-intro.html><b>1. </b>Introduction</a></li><li data-nav-id=/4-detective-controls-config/2-env-setup.html title=Set-up class=dd-item><a href=../4-detective-controls-config/2-env-setup.html><b>2. </b>Set-up</a></li><li data-nav-id=/4-detective-controls-config/3-config-setup.html title="Enable AWS Config" class=dd-item><a href=../4-detective-controls-config/3-config-setup.html><b>3. </b>Enable AWS Config</a></li><li data-nav-id=/4-detective-controls-config/4-add-rules.html title="Add Managed Config Rules" class=dd-item><a href=../4-detective-controls-config/4-add-rules.html><b>4. </b>Add Managed Config Rules</a></li><li data-nav-id=/4-detective-controls-config/5-dashboard.html title="Review Dashboard" class=dd-item><a href=../4-detective-controls-config/5-dashboard.html><b>5. </b>Review Dashboard</a></li><li data-nav-id=/4-detective-controls-config/6-rule-scope.html title="Rule Scope" class=dd-item><a href=../4-detective-controls-config/6-rule-scope.html><b>6. </b>Rule Scope</a></li><li data-nav-id=/4-detective-controls-config/7-remediate.html title="Auto Remediate" class=dd-item><a href=../4-detective-controls-config/7-remediate.html><b>7. </b>Auto Remediate</a></li><li data-nav-id=/4-detective-controls-config/8-timelines.html title="Explore Timelines" class=dd-item><a href=../4-detective-controls-config/8-timelines.html><b>8. </b>Explore Timelines</a></li><li data-nav-id=/4-detective-controls-config/9-clean-up.html title="Clean up" class=dd-item><a href=../4-detective-controls-config/9-clean-up.html><b>9. </b>Clean up</a></li></ul></li><li data-nav-id=/6-patching-controls-ssm.html title="Patching Controls with Systems Manager" class=dd-item><a href=../6-patching-controls-ssm.html>Patching Controls with Systems Manager</a><ul><li data-nav-id=/6-patching-controls-ssm/1-intro.html title=Introduction class=dd-item><a href=../6-patching-controls-ssm/1-intro.html><b>1. </b>Introduction</a></li><li data-nav-id=/6-patching-controls-ssm/2-env-setup.html title=Set-up class=dd-item><a href=../6-patching-controls-ssm/2-env-setup.html><b>2. </b>Set-up</a></li><li data-nav-id=/6-patching-controls-ssm/3-current-os.html title="Determine the current OS versions" class=dd-item><a href=../6-patching-controls-ssm/3-current-os.html><b>3. </b>Determine the current OS versions</a></li><li data-nav-id=/6-patching-controls-ssm/4-set-patch-baselines.html title="Set patch baselines" class=dd-item><a href=../6-patching-controls-ssm/4-set-patch-baselines.html><b>4. </b>Set patch baselines</a></li><li data-nav-id=/6-patching-controls-ssm/5-review-compliance.html title="Review compliance" class=dd-item><a href=../6-patching-controls-ssm/5-review-compliance.html><b>5. </b>Review compliance</a></li><li data-nav-id=/6-patching-controls-ssm/6-maintenance-window.html title="Create a maintenance window" class=dd-item><a href=../6-patching-controls-ssm/6-maintenance-window.html><b>6. </b>Create a maintenance window</a></li><li data-nav-id=/6-patching-controls-ssm/7-patch-manager-config.html title="Create Patch Manager configuration" class=dd-item><a href=../6-patching-controls-ssm/7-patch-manager-config.html><b>7. </b>Create Patch Manager configuration</a></li><li data-nav-id=/6-patching-controls-ssm/8-patch-now.html title="Patch Now" class=dd-item><a href=../6-patching-controls-ssm/8-patch-now.html><b>8. </b>Patch Now</a></li><li data-nav-id=/6-patching-controls-ssm/9-clean-up.html title="Clean up" class=dd-item><a href=../6-patching-controls-ssm/9-clean-up.html><b>9. </b>Clean up</a></li></ul></li><li data-nav-id=/7-preventative-controls-codepipeline.html title="Preventative controls with Code Pipeline" class="dd-item
parent"><a href=../7-preventative-controls-codepipeline.html>Preventative controls with Code Pipeline</a><ul><li data-nav-id=/7-preventative-controls-codepipeline/1-intro.html title=Introduction class="dd-item
parent
active"><a href=../7-preventative-controls-codepipeline/1-intro.html><b>1. </b>Introduction</a></li><li data-nav-id=/7-preventative-controls-codepipeline/3-create-environments.html title="Create environments" class=dd-item><a href=../7-preventative-controls-codepipeline/3-create-environments.html><b>3. </b>Create environments</a></li><li data-nav-id=/7-preventative-controls-codepipeline/4-failed-step.html title="Identify failed resource" class=dd-item><a href=../7-preventative-controls-codepipeline/4-failed-step.html><b>3. </b>Identify failed resource</a></li><li data-nav-id=/7-preventative-controls-codepipeline/5-review-checks.html title="Review checks" class=dd-item><a href=../7-preventative-controls-codepipeline/5-review-checks.html><b>5. </b>Review checks</a></li><li data-nav-id=/7-preventative-controls-codepipeline/6-correct-cfn.html title="Review code pipeline" class=dd-item><a href=../7-preventative-controls-codepipeline/6-correct-cfn.html><b>6. </b>Review code pipeline</a></li><li data-nav-id=/7-preventative-controls-codepipeline/7-check-change.html title="Deploy change" class=dd-item><a href=../7-preventative-controls-codepipeline/7-check-change.html><b>7. </b>Deploy change</a></li><li data-nav-id=/7-preventative-controls-codepipeline/10-clean-up.html title="Clean up" class=dd-item><a href=../7-preventative-controls-codepipeline/10-clean-up.html><b>10. </b>Clean up</a></li></ul></li></ul><section id=footer><left><a href="https://aws.amazon.com/privacy/?nc1=f_pr">Privacy</a> | <a href="https://aws.amazon.com/terms/?nc1=f_pr">Site Terms</a> | © 2020, Amazon Web Services, Inc. or its affiliates. All rights reserved.</left></section></div></nav><section id=body><div id=overlay></div><div class="padding highlightable"><div><div id=top-bar><div id=breadcrumbs itemscope itemtype=https://data-vocabulary.org/Breadcrumb><span id=sidebar-toggle-span><a href=# id=sidebar-toggle data-sidebar-toggle><i class="fa fa-bars"></i></a></span><span class=links><a href=../>Risk & Compliance Workshop</a> > <a href=../7-preventative-controls-codepipeline.html>Preventative controls with Code Pipeline</a> > Introduction</span></div></div></div><div id=body-inner><h1>Introduction</h1><p>An important aspect of infrastructure as code is testing and the ability
to ensure it meets standards and control requirements before it reaches production.</p><p>In this workshop, we will pass a CloudFormation script written in a language called yaml through
<a href=https://aws.amazon.com/codepipeline/ target=_blank>AWS CodePipeline</a>. If the CloudFormation script fails any of the checks we will investigate why and correct these. Once the script passes all checks it will be deployed into our environment.</p><p>The Pipeline has three stages;</p><ol><li><strong>Source</strong> - monitor the S3 Bucket for any changes to the file cfn-template.yaml.zip and when detected pass the changes to the Build stage. Note that in a production environment you would use a code repository tool rather than S3, but in this case we will keep it simple.</li><li><strong>Build</strong> - take the cfn-template.yaml.zip file from the source stage, run it through the CloudFormation checks, produce a report, and if the CloudFormation template passes all the checks, then moves the file on to the Deploy stage.</li><li><strong>Deploy</strong> - accept the script from the Build stage and passes it to AWS CloudFormation to deploy into our environment.</li></ol><figure><img src="../7-preventative-controls-codepipeline/1-intro/architecture.png?classes=shadow&width=60pc" alt="workshop architecture"></figure><p>It&rsquo;s helpful to understand that CodePipeline can have many different pipelines, each handling different kinds of jobs. These jobs can be the deployment of infrastructure like in this workshop, or applications.</p><p>To help demonstrate the pipeline, a CloudFormation Template to deploy two new
S3 Buckets has been submitted, but the deployment has failed. The Engineering Team have
invited you to review the pipeline and have a look at why the deployment has failed.</p><p>In this workshop we will demonstrate this idea by checking a CloudFormation script.
The script we will test contains the instructions to create three S3 buckets.</p><p>As member of the Risk and Assurance Team at AnyCompany you have been engaged in
an increasing number of discussions with the AnyCompany Cloud Engineering Team
about their adoption of DevOps. To keep up you&rsquo;ve been doing a bit of research
including reading up on the AWS
<a href=https://aws.amazon.com/devops/what-is-devops/ target=_blank>What is DevOps?</a> page.</p><p>You know that core to the DevOps model is development and operations
teams no longer operating in silos and at AnyCompany the two teams are now merged into
a single team where engineers work across the entire application lifecycle,
from development and test to deployment to operations. AnyCompany has adopted the
mantra &ldquo;You build it, you run it&rdquo;. As a result you are seeing decreased defects,
improvements in quality and faster development cycles.</p><p>As AnyCompany moves more workloads onto AWS, the Cloud Team is applying the
same DevOps Model to infrastructure. You know that because infrastructure is
described in <a href=https://aws.amazon.com/cloudformation/ target=_blank>CloudFormation</a> templates
it can be tested just like application code and changes made very quickly.</p><p>You are however concerned that security seems to be a bit of a bolt on at the
end, and there&rsquo;s a bit of increased tension between the Security Team and
Engineering. With the Engineering Team complaining that they are being slowed down
and that evidencing controls for risk sign-off is taking up too much time. You are
also noticing some rising stress levels in the Security Team with the increased
workload.</p><p>You need to find a way to automate the testing of as many security controls
as you can. You also want to put much of this in the hands of the Engineering Team.
This will allow the engineers to test against these controls early in the
development cycle and as often as they like. Doing this will allow the Security Team
and Risk and Assurance Team to focus on other testing other higher order controls.
It will also make everyone&rsquo;s life a lot easier.</p><h1 id=learning-outcome>Learning Outcome</h1><p>This workshop provides an introduction to the implementation of preventative controls via a code pipeline. This is central to the DevOps idea of &lsquo;shifting left&rsquo;, or moving testing earlier in the development cycle and having it performed more frequently. In this challenge you will learn how to &lsquo;shift left&rsquo; a set of infrastructure as code tests to ensure that the CloudFormation scripts meet requirements prior to being deployed.</p><p>This workshop will also introduce YAML, one of the AWS CloudFormation Template formats.</p><h4 id=technical-knowledge-prerequisites>Technical knowledge prerequisites</h4><p>This workshop doesn&rsquo;t require familiarity with AWS services, however being able to navigate the console and some basic understanding of S3 will be helpful. You will need to be able to download files, zip and unzip files, and open files in a text editor.</p><h4 id=topics-covered>Topics covered</h4><p>By completing this workshop, you will be able to:</p><ul><li>Review an AWS CodePipeline and understand it&rsquo;s progress,</li><li>Navigate AWS CodeBuild and review it&rsquo;s logs and reports, and</li><li>Update a CloudFormation template.</li></ul><footer class=footline></footer></div></div><div id=navigation><a class="nav nav-prev" href=../7-preventative-controls-codepipeline.html title="Preventative controls with Code Pipeline"><i class="fa fa-chevron-left"></i></a><a class="nav nav-next" href=../7-preventative-controls-codepipeline/3-create-environments.html title="Create environments" style=margin-right:0><i class="fa fa-chevron-right"></i></a></div></section><div style=left:-1000px;overflow:scroll;position:absolute;top:-1000px;border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px><div style=border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px></div></div><script src=../js/clipboard.min.js></script><script src=../js/perfect-scrollbar.min.js></script><script src=../js/perfect-scrollbar.jquery.min.js></script><script src=../js/jquery.sticky.js></script><script src=../js/featherlight.min.js></script><script src=../js/html5shiv-printshiv.min.js></script><script src=../js/highlight.pack.js></script><script>hljs.initHighlightingOnLoad();</script><script src=../js/modernizr.custom-3.6.0.js></script><script src=../js/learn.js></script><script src=../js/hugo-learn.js></script><link href=../mermaid/mermaid.css rel=stylesheet><script src=../mermaid/mermaid.js></script><script>mermaid.initialize({startOnLoad:true});</script></body></html>