<!doctype html><html class=no-js lang=en-us prefix="og: https://ogp.me/ns# fb: https://ogp.me/ns/fb#"><html lang=en class="js csstransforms3d"><head><meta charset=utf-8><meta property="og:title" content="Risk & Compliance Labs"><meta property="og:type" content="website"><meta property="og:url" content><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><meta name=generator content="Hugo 0.80.0"><meta name=description content="Hands on labs for those interested in risk & assurance, and compliance."><meta name=author content="Amazon AWS"><link rel="shortcut icon" href=https://a0.awsstatic.com/libra-css/images/site/fav/favicon.ico type=image/ico><link rel=icon href=https://a0.awsstatic.com/libra-css/images/site/fav/favicon.ico type=image/ico><title>Set-up :: Risk & Compliance Labs</title><link href=../css/nucleus.css rel=stylesheet><link href=../css/fontawesome-all.min.css rel=stylesheet><link href=../css/hybrid.css rel=stylesheet><link href=../css/featherlight.min.css rel=stylesheet><link href=../css/perfect-scrollbar.min.css rel=stylesheet><link href=../css/auto-complete.css rel=stylesheet><link href=../css/atom-one-dark-reasonable.css rel=stylesheet><link href=../css/theme.css rel=stylesheet><link href=../css/hugo-theme.css rel=stylesheet><link href=../css/theme-aws.css rel=stylesheet><script src=../js/jquery-3.3.1.min.js></script><style>:root #header+#content>#left>#rlblock_left{display:none!important}:not(pre)>code+span.copy-to-clipboard{display:none}</style></head><body data-url=../4-detective-controls-config/2-env-setup.html><nav id=sidebar><div id=header-wrapper><div id=header><div><a href=../ title="Go home"><img style=vertical-align:middle src=../images/logo.png height=70px></a></div></div><div class=searchbox><label for=search-by><i class="fas fa-search"></i></label><input data-search-input id=search-by type=search placeholder=Search...>
<span data-search-clear><i class="fas fa-times"></i></span></div><script type=text/javascript src=../js/lunr.min.js></script><script type=text/javascript src=../js/auto-complete.js></script><script type=text/javascript>var baseurl="";</script><script type=text/javascript src=../js/search.js></script></div><div class=highlightable><ul class=topics><li data-nav-id=/1-start-workshop.html title="Start the Workshop" class=dd-item><a href=../1-start-workshop.html><b></b>Start the Workshop</a><ul><li data-nav-id=/1-start-workshop/on-your-own.html title="In your own account" class=dd-item><a href=../1-start-workshop/on-your-own.html><b></b>On your own</a><ul><li data-nav-id=/1-start-workshop/on-your-own/create-an-aws-account.html title="Create an AWS Account" class=dd-item><a href=../1-start-workshop/on-your-own/create-an-aws-account.html>Create an AWS Account</a></li></ul></li><li data-nav-id=/1-start-workshop/at-an-aws-event.html title="At an AWS Event" class=dd-item><a href=../1-start-workshop/at-an-aws-event.html>At an AWS Event</a><ul><li data-nav-id=/1-start-workshop/at-an-aws-event/aws-workshop-portal.html title="AWS Workshop Portal" class=dd-item><a href=../1-start-workshop/at-an-aws-event/aws-workshop-portal.html><b></b>AWS Workshop Portal</a></li></ul></li></ul></li><li data-nav-id=/2-know-the-console.html title="Getting to Know the Console" class=dd-item><a href=../2-know-the-console.html>Getting to Know the Console</a></li><li data-nav-id=/3-aws-compliance-reports.html title="Accessing AWS Compliance Reports" class=dd-item><a href=../3-aws-compliance-reports.html>AWS Compliance Reports</a><ul><li data-nav-id=/3-aws-compliance-reports/1-intro.html title=Introduction class=dd-item><a href=../3-aws-compliance-reports/1-intro.html><b>1. </b>Introduction</a></li><li data-nav-id=/3-aws-compliance-reports/2-access-a-report.html title="Access a report" class=dd-item><a href=../3-aws-compliance-reports/2-access-a-report.html><b>2. </b>Access a report</a></li><li data-nav-id=/3-aws-compliance-reports/3-interpret-results.html title="Interpreting the results" class=dd-item><a href=../3-aws-compliance-reports/3-interpret-results.html><b>3. </b>Interpreting the results</a></li><li data-nav-id=/3-aws-compliance-reports/4-shared-responsibility.html title="Deep Dive: Shared Responsibility" class=dd-item><a href=../3-aws-compliance-reports/4-shared-responsibility.html><b>4. </b>Deep Dive: Shared Responsibility</a></li></ul></li><li data-nav-id=/4-detective-controls-config.html title="Detective Controls with Config" class="dd-item
parent"><a href=../4-detective-controls-config.html>Detective Controls with Config</a><ul><li data-nav-id=/4-detective-controls-config/1-intro.html title=Introduction class=dd-item><a href=../4-detective-controls-config/1-intro.html><b>1. </b>Introduction</a></li><li data-nav-id=/4-detective-controls-config/2-env-setup.html title=Set-up class="dd-item
parent
active"><a href=../4-detective-controls-config/2-env-setup.html><b>2. </b>Set-up</a></li><li data-nav-id=/4-detective-controls-config/3-config-setup.html title="Enable AWS Config" class=dd-item><a href=../4-detective-controls-config/3-config-setup.html><b>3. </b>Enable AWS Config</a></li><li data-nav-id=/4-detective-controls-config/4-add-rules.html title="Add Managed Config Rules" class=dd-item><a href=../4-detective-controls-config/4-add-rules.html><b>4. </b>Add Managed Config Rules</a></li><li data-nav-id=/4-detective-controls-config/5-dashboard.html title="Review Dashboard" class=dd-item><a href=../4-detective-controls-config/5-dashboard.html><b>5. </b>Review Dashboard</a></li><li data-nav-id=/4-detective-controls-config/6-rule-scope.html title="Rule Scope" class=dd-item><a href=../4-detective-controls-config/6-rule-scope.html><b>6. </b>Rule Scope</a></li><li data-nav-id=/4-detective-controls-config/7-remediate.html title="Auto Remediate" class=dd-item><a href=../4-detective-controls-config/7-remediate.html><b>7. </b>Auto Remediate</a></li><li data-nav-id=/4-detective-controls-config/8-timelines.html title="Explore Timelines" class=dd-item><a href=../4-detective-controls-config/8-timelines.html><b>8. </b>Explore Timelines</a></li><li data-nav-id=/4-detective-controls-config/9-clean-up.html title="Clean up" class=dd-item><a href=../4-detective-controls-config/9-clean-up.html><b>9. </b>Clean up</a></li></ul></li><li data-nav-id=/6-patching-controls-ssm.html title="Patching Controls with Systems Manager" class=dd-item><a href=../6-patching-controls-ssm.html>Patching Controls with Systems Manager</a><ul><li data-nav-id=/6-patching-controls-ssm/1-intro.html title=Introduction class=dd-item><a href=../6-patching-controls-ssm/1-intro.html><b>1. </b>Introduction</a></li><li data-nav-id=/6-patching-controls-ssm/2-env-setup.html title=Set-up class=dd-item><a href=../6-patching-controls-ssm/2-env-setup.html><b>2. </b>Set-up</a></li><li data-nav-id=/6-patching-controls-ssm/3-current-os.html title="Determine the current OS versions" class=dd-item><a href=../6-patching-controls-ssm/3-current-os.html><b>3. </b>Determine the current OS versions</a></li><li data-nav-id=/6-patching-controls-ssm/4-set-patch-baselines.html title="Set patch baselines" class=dd-item><a href=../6-patching-controls-ssm/4-set-patch-baselines.html><b>4. </b>Set patch baselines</a></li><li data-nav-id=/6-patching-controls-ssm/5-review-compliance.html title="Review compliance" class=dd-item><a href=../6-patching-controls-ssm/5-review-compliance.html><b>5. </b>Review compliance</a></li><li data-nav-id=/6-patching-controls-ssm/6-maintenance-window.html title="Create a maintenance window" class=dd-item><a href=../6-patching-controls-ssm/6-maintenance-window.html><b>6. </b>Create a maintenance window</a></li><li data-nav-id=/6-patching-controls-ssm/7-patch-manager-config.html title="Create Patch Manager configuration" class=dd-item><a href=../6-patching-controls-ssm/7-patch-manager-config.html><b>7. </b>Create Patch Manager configuration</a></li><li data-nav-id=/6-patching-controls-ssm/8-patch-now.html title="Patch Now" class=dd-item><a href=../6-patching-controls-ssm/8-patch-now.html><b>8. </b>Patch Now</a></li><li data-nav-id=/6-patching-controls-ssm/9-clean-up.html title="Clean up" class=dd-item><a href=../6-patching-controls-ssm/9-clean-up.html><b>9. </b>Clean up</a></li></ul></li><li data-nav-id=/7-preventative-controls-codepipeline.html title="Preventative controls with Code Pipeline" class=dd-item><a href=../7-preventative-controls-codepipeline.html>Preventative controls with Code Pipeline</a><ul><li data-nav-id=/7-preventative-controls-codepipeline/1-intro.html title=Introduction class=dd-item><a href=../7-preventative-controls-codepipeline/1-intro.html><b>1. </b>Introduction</a></li><li data-nav-id=/7-preventative-controls-codepipeline/3-create-environments.html title="Create environments" class=dd-item><a href=../7-preventative-controls-codepipeline/3-create-environments.html><b>3. </b>Create environments</a></li><li data-nav-id=/7-preventative-controls-codepipeline/4-failed-step.html title="Identify failed resource" class=dd-item><a href=../7-preventative-controls-codepipeline/4-failed-step.html><b>3. </b>Identify failed resource</a></li><li data-nav-id=/7-preventative-controls-codepipeline/5-review-checks.html title="Review checks" class=dd-item><a href=../7-preventative-controls-codepipeline/5-review-checks.html><b>5. </b>Review checks</a></li><li data-nav-id=/7-preventative-controls-codepipeline/6-correct-cfn.html title="Review code pipeline" class=dd-item><a href=../7-preventative-controls-codepipeline/6-correct-cfn.html><b>6. </b>Review code pipeline</a></li><li data-nav-id=/7-preventative-controls-codepipeline/7-check-change.html title="Deploy change" class=dd-item><a href=../7-preventative-controls-codepipeline/7-check-change.html><b>7. </b>Deploy change</a></li><li data-nav-id=/7-preventative-controls-codepipeline/10-clean-up.html title="Clean up" class=dd-item><a href=../7-preventative-controls-codepipeline/10-clean-up.html><b>10. </b>Clean up</a></li></ul></li></ul><section id=footer><left><a href="https://aws.amazon.com/privacy/?nc1=f_pr">Privacy</a> | <a href="https://aws.amazon.com/terms/?nc1=f_pr">Site Terms</a> | Â© 2020, Amazon Web Services, Inc. or its affiliates. All rights reserved.</left></section></div></nav><section id=body><div id=overlay></div><div class="padding highlightable"><div><div id=top-bar><div id=breadcrumbs itemscope itemtype=https://data-vocabulary.org/Breadcrumb><span id=sidebar-toggle-span><a href=# id=sidebar-toggle data-sidebar-toggle><i class="fa fa-bars"></i></a></span><span class=links><a href=../>Risk & Compliance Workshop</a> > <a href=../4-detective-controls-config.html>Detective Controls with Config</a> > Set-up</span></div></div></div><div id=body-inner><h1>Set-up</h1><p>In this Lab you will start with five AWS resources.</p><ul><li>Three example <a href=https://aws.amazon.com/s3/ target=_blank>Amazon Simple Storage Service (Amazon S3)</a> buckets or S3 Bucket for short. These S3 buckets are the example resources we will monitor with AWS Config.</li><li>An <a href=https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles.html target=_blank>IAM Role</a> used by the Config auto-remediation to access the S3 Buckets.</li><li>An <a href=https://docs.aws.amazon.com/IAM/latest/UserGuide/access_policies.html target=_blank>IAM policy</a>, which defines the access of the Iam Role.</li></ul><figure><img src="../4-detective-controls-config/2-env-setup/set-up.png?classes=shadow&width=60pc" alt></figure><h4 id=1-get-to-know-cloudformation>1. Get to know CloudFormation</h4><p>Regardless of if you are using your own account an one supplied by AWS, the resources above are created using <a href=https://aws.amazon.com/cloudformation/ target=_blank>AWS CloudFormation</a>. CloudFormation is an important service as it provides a way to rapidly and consistently deploy AWS resources. This is at the heart of the concept of infrastructure as code. Take the time (3:01) to watch the short video describing CloudFormation if you haven&rsquo;t already seen in.</p><div style=position:relative;padding-bottom:56.25%;height:0;overflow:hidden><iframe src=https://www.youtube-nocookie.com/embed/Omppm_YUG2g style=position:absolute;top:0;left:0;width:100%;height:100%;border:0 allowfullscreen title="YouTube Video"></iframe></div><div class="notices info"><p>The following steps are required only if you are completing this workshop in your own AWS account. If you are using an AWS account which has been provided as part of a AWS Event (Event Engine) then the environment will be set up for you.</p></div><h4 id=2-create-a-cloudformation-stack>2. Create a CloudFormation stack</h4><p>Select Services on the menu bar at the top of the AWS Console and select CloudFormation under <strong>Management & Governance</strong>.</p><figure><img src="../4-detective-controls-config/2-env-setup/cfn-console.png?classes=shadow&width=60pc" alt="Create cfn stack"></figure><p>Click <span style="display:inline;font-weight:400;padding:5px 15px;color:White;border-style:solid;border-width:1px;background-color:#e3661b">Create stack</span></p><figure><img src="../4-detective-controls-config/2-env-setup/cfn-create-stack.png?classes=shadow&width=60pc" alt="Create cfn stack"></figure><p>Under <strong>Prerequisite - Prepare template</strong> ensure <strong>Template is ready</strong> is selected, this will tell CloudFormation you have a pre-prepared CloudFormation script.</p><p>Under <strong>Specify template</strong> select <strong>Upload a template file</strong> and choose the <code>detective-controls-config.yaml</code> file.</p><div class="notices warning"><p>TODO: Provide location of - detective-controls-config.yaml</p></div><h4 id=3-specify-stack-details>3. Specify stack details</h4><p>CloudFormation will now ask you to enter a <strong>StackName</strong>, enter something like <code>config-workshop</code>.</p><figure><img src="../4-detective-controls-config/2-env-setup/cfn-stack-details.png?classes=shadow&width=60pc" alt="Create cfn stack"></figure><p>Click <span style="display:inline;font-weight:400;padding:5px 15px;color:#fff;border-style:solid;border-width:1px;background-color:#e3661b">Next</span></p><p>There is no need to change anything on the <strong>Configure stack options</strong> page, scroll to the bottom and click <span style="display:inline;font-weight:400;padding:5px 15px;color:#fff;border-style:solid;border-width:1px;background-color:#e3661b">Next
</span>.</p><p>Scroll to the bottom of the final page, under <strong>Capabilities</strong> you will see a message box telling you that the CloudFormation template will create Identity and Access Management (IAM) resources, this is just a warning to ensure you don&rsquo;t inadvertently compromise your security by creating unwanted permissions.</p><figure><img src="../4-detective-controls-config/2-env-setup/cfn-capabilities.png?classes=shadow&width=60pc" alt></figure>Select the acknowledgement check box and click <span style="display:inline;font-weight:400;padding:5px 15px;color:#fff;border-style:solid;border-width:1px;background-color:#e3661b">Create stack
</span>.<h4 id=4-check-progress>4. Check progress</h4><p>You will be taken bck to the CloudFormation screen for the stack you are creating. Here you can follow the progress of the creation of resources.</p><figure><img src="../4-detective-controls-config/2-env-setup/cfn-stack-in-progress.png?classes=shadow&width=60pc" alt></figure><p>When the stack has been deployed you will see
<span style=display:inline;font-weight:700;color:green>CREATE_COMPLETE</span> on the left-hand panel. Click the refresh button to see the events.</p><p>Click on the <strong>Resources</strong> tab to see the list of resources created.</p><figure><img src="../4-detective-controls-config/2-env-setup/cfn-stack-resources.png?classes=shadow&width=60pc" alt></figure><p>You have successfully created the resources you need to complete this workshop. you should progress to the next step.</p><p>More about these later. Click <span style="display:inline;font-weight:400;padding:5px 15px;color:#fff;border-style:solid;border-width:1px;background-color:#e3661b">Next</span></p><footer class=footline></footer></div></div><div id=navigation><a class="nav nav-prev" href=../4-detective-controls-config/1-intro.html title=Introduction><i class="fa fa-chevron-left"></i></a><a class="nav nav-next" href=../4-detective-controls-config/3-config-setup.html title="Enable AWS Config" style=margin-right:0><i class="fa fa-chevron-right"></i></a></div></section><div style=left:-1000px;overflow:scroll;position:absolute;top:-1000px;border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px><div style=border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px></div></div><script src=../js/clipboard.min.js></script><script src=../js/perfect-scrollbar.min.js></script><script src=../js/perfect-scrollbar.jquery.min.js></script><script src=../js/jquery.sticky.js></script><script src=../js/featherlight.min.js></script><script src=../js/html5shiv-printshiv.min.js></script><script src=../js/highlight.pack.js></script><script>hljs.initHighlightingOnLoad();</script><script src=../js/modernizr.custom-3.6.0.js></script><script src=../js/learn.js></script><script src=../js/hugo-learn.js></script><link href=../mermaid/mermaid.css rel=stylesheet><script src=../mermaid/mermaid.js></script><script>mermaid.initialize({startOnLoad:true});</script></body></html>