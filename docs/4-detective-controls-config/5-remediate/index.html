<!doctype html><html lang=en class="js csstransforms3d"><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.80.0"><meta name=description content="Hands on labs for those interested in risk & assurance, and compliance."><meta name=author content="Paul Curtis"><link rel=icon href=/risk-lab-site/images/favicon.png type=image/png><title>Remediate :: Risk & Compliance Labs</title><link href=/risk-lab-site/css/nucleus.css?1615966480 rel=stylesheet><link href=/risk-lab-site/css/fontawesome-all.min.css?1615966480 rel=stylesheet><link href=/risk-lab-site/css/hybrid.css?1615966480 rel=stylesheet><link href=/risk-lab-site/css/featherlight.min.css?1615966480 rel=stylesheet><link href=/risk-lab-site/css/theme.css?1615966480 rel=stylesheet><link href=/risk-lab-site/css/hugo-theme.css?1615966480 rel=stylesheet><link href=/risk-lab-site/css/theme-labs.css?1615966480 rel=stylesheet><script src=/risk-lab-site/js/jquery-3.3.1.min.js?1615966480></script><style>:root #header+#content>#left>#rlblock_left{display:none!important}</style></head><body data-url=/risk-lab-site/4-detective-controls-config/5-remediate/><nav id=sidebar><div id=header-wrapper><div id=header><a id=logo href=http://paulJRCurtis.github.io/risk-lab-site/><img src=/risk-lab-site/images/AWS_AWS_logo_RGB_REV.png alt=AWS></a></div></div><div class=highlightable><ul class=topics><li data-nav-id=/risk-lab-site/1-start-workshop/ title="Start the Workshop" class=dd-item><a href=/risk-lab-site/1-start-workshop/><b></b>Start the Workshop</a><ul><li data-nav-id=/risk-lab-site/1-start-workshop/on-your-own/ title="In your own account" class=dd-item><a href=/risk-lab-site/1-start-workshop/on-your-own/><b></b>On your own</a><ul><li data-nav-id=/risk-lab-site/1-start-workshop/on-your-own/create-an-aws-account/ title="Create an AWS Account" class=dd-item><a href=/risk-lab-site/1-start-workshop/on-your-own/create-an-aws-account/><b></b>Create an AWS Account</a></li></ul></li><li data-nav-id=/risk-lab-site/1-start-workshop/at-an-aws-event/ title="At an AWS Event" class=dd-item><a href=/risk-lab-site/1-start-workshop/at-an-aws-event/>At an AWS Event</a><ul><li data-nav-id=/risk-lab-site/1-start-workshop/at-an-aws-event/aws-workshop-portal/ title="AWS Workshop Portal" class=dd-item><a href=/risk-lab-site/1-start-workshop/at-an-aws-event/aws-workshop-portal/><b></b>AWS Workshop Portal</a></li></ul></li></ul></li><li data-nav-id=/risk-lab-site/2-know-the-console/ title="Getting to Know the Console" class=dd-item><a href=/risk-lab-site/2-know-the-console/>Getting to Know the Console</a></li><li data-nav-id=/risk-lab-site/3-aws-compliance-reports/ title="Accessing AWS Compliance Reports" class=dd-item><a href=/risk-lab-site/3-aws-compliance-reports/>AWS Compliance Reports</a><ul><li data-nav-id=/risk-lab-site/3-aws-compliance-reports/1-access-a-report/ title="Access a report" class=dd-item><a href=/risk-lab-site/3-aws-compliance-reports/1-access-a-report/><b>1. </b>Access a report</a></li><li data-nav-id=/risk-lab-site/3-aws-compliance-reports/3-optional-shared-responsibility/ title="Optional: Shared Responsibility" class=dd-item><a href=/risk-lab-site/3-aws-compliance-reports/3-optional-shared-responsibility/><b>Optional: </b>Advanced Shared Responsibility</a></li><li data-nav-id=/risk-lab-site/3-aws-compliance-reports/4-optional-map-results/ title="Optional: Controls Mapping" class=dd-item><a href=/risk-lab-site/3-aws-compliance-reports/4-optional-map-results/><b>Optional: </b>Controls Mapping</a></li></ul></li><li data-nav-id=/risk-lab-site/4-detective-controls-config/ title="Detective Controls with Config" class="dd-item
parent"><a href=/risk-lab-site/4-detective-controls-config/>Detective Controls with Config</a><ul><li data-nav-id=/risk-lab-site/4-detective-controls-config/1-config-setup/ title="Enable AWS Config" class=dd-item><a href=/risk-lab-site/4-detective-controls-config/1-config-setup/><b>1. </b>Enable AWS Config</a></li><li data-nav-id=/risk-lab-site/4-detective-controls-config/2-select-rules/ title="Select AWS Config Rules" class=dd-item><a href=/risk-lab-site/4-detective-controls-config/2-select-rules/><b>2. </b>Select AWS Config Rules</a></li><li data-nav-id=/risk-lab-site/4-detective-controls-config/3-dashboard/ title="Review Dashboard" class=dd-item><a href=/risk-lab-site/4-detective-controls-config/3-dashboard/><b>3. </b>Review Dashboard</a></li><li data-nav-id=/risk-lab-site/4-detective-controls-config/4-rule-scope/ title="Rule Scope" class=dd-item><a href=/risk-lab-site/4-detective-controls-config/4-rule-scope/><b>4. </b>Rule Scope</a></li><li data-nav-id=/risk-lab-site/4-detective-controls-config/5-remediate/ title=Remediate class="dd-item
parent
active"><a href=/risk-lab-site/4-detective-controls-config/5-remediate/><b>5. </b>Remediate</a></li><li data-nav-id=/risk-lab-site/4-detective-controls-config/6-timelines/ title="Explore Timelines" class=dd-item><a href=/risk-lab-site/4-detective-controls-config/6-timelines/><b>6. </b>Explore Timelines</a></li></ul></li><li data-nav-id=/risk-lab-site/patching-controls-with-ssm/ title="Patching Controls with Systems Manager" class=dd-item><a href=/risk-lab-site/patching-controls-with-ssm/>Patching Controls with Systems Manager</a><ul><li data-nav-id=/risk-lab-site/patching-controls-with-ssm/1-current-os/ title="Determine the current OS versions" class=dd-item><a href=/risk-lab-site/patching-controls-with-ssm/1-current-os/>Determine the current OS versions</a></li><li data-nav-id=/risk-lab-site/patching-controls-with-ssm/2-set-patch-baselines/ title="Set patch baselines" class=dd-item><a href=/risk-lab-site/patching-controls-with-ssm/2-set-patch-baselines/>Set patch baselines</a></li><li data-nav-id=/risk-lab-site/patching-controls-with-ssm/3-review-compliance/ title="Review compliance" class=dd-item><a href=/risk-lab-site/patching-controls-with-ssm/3-review-compliance/>Review compliance</a></li><li data-nav-id=/risk-lab-site/patching-controls-with-ssm/4-maintenance-window/ title="Create a Maintenance Window" class=dd-item><a href=/risk-lab-site/patching-controls-with-ssm/4-maintenance-window/>Create a Maintenance Window</a></li><li data-nav-id=/risk-lab-site/patching-controls-with-ssm/5-patch-manager-config/ title="Create Patch Manager configuration" class=dd-item><a href=/risk-lab-site/patching-controls-with-ssm/5-patch-manager-config/>Create Patch Manager configuration</a></li><li data-nav-id=/risk-lab-site/patching-controls-with-ssm/6-patch-now/ title="Patch Now" class=dd-item><a href=/risk-lab-site/patching-controls-with-ssm/6-patch-now/>Patch Now</a></li></ul></li></ul><section id=footer><p>Built with <a href=https://github.com/matcornic/hugo-theme-learn><i class="fas fa-heart"></i></a>from <a href=https://getgrav.org>Grav</a> and <a href=https://gohugo.io/>Hugo</a></p></section></div></nav><section id=body><div class="padding highlightable"><div id=top-bar><div id=breadcrumbs itemscope itemtype=http://data-vocabulary.org/Breadcrumb><span id=sidebar-toggle-span><a href=# id=sidebar-toggle data-sidebar-toggle><i class="fas fa-bars"></i></a></span><span class=links><a href=/risk-lab-site/>Risk & Compliance Labs</a> > <a href=/risk-lab-site/4-detective-controls-config/>Detective Controls with Config</a> > Remediate</span></div></div><div id=head-tags></div><div id=body-inner><h1>Remediate</h1><p></p><p>Now you can take this control from detective to an automated corrective control by adding automated remediation to the
s3-bucket-server-side-encryption-enabled config rule you set-up.</p><p>This means that AWS Config will automatically apply server side encryption to any bucket in the account found that doesn&rsquo;t have it turned on.</p><p>In a production environment you want to carefully choose the actions you automate and the resources that these actions apply to, but automation is a powerful way to move to a more proactive risk and controls management stance.</p><h4 id=1-find-the-automationassumerole>1. Find the AutomationAssumeRole</h4><p>To turn on the auto remediation action you will need to provide some parameters, one of these is the;</p><ul><li><strong>AutoAssumeRole</strong> This is the role (and associated permissions) that allows the auto remediation to happen. We will ue the AutoAssumeRole ARN or <a href=https://docs.aws.amazon.com/general/latest/gr/aws-arns-and-namespaces.html target=_blank>Amazon Resource Name</a>. The ARN is used to uniquely identify the role.</li></ul><p>To find the AutomationAssumeRole you need to go to <strong>Roles</strong> in
<a href=https://aws.amazon.com/iam/ target=_blank>AWS Identity and Access Management</a> (IAM).</p><p>Use the <strong>Services</strong> dropdown to navigate the IAM and select <strong>Roles</strong>. From this screen you will see a list of existing roles and up the top you should see <strong>AutomationServiceRole</strong>.</p><p><img src=clue2-roles.png alt=AutomationServiceRole></p><p>Click on the name of the role to see a summary of the role.
At the top of this screen you will see <strong>Role ARN</strong>. Copy the ARN (you can do so easily by clicking the copy icon to the right). This is the string you will need to paste into the AutomatedAssumeRole back in Config.</p><p><img src=clue2-role-summary.png alt=AutomationServiceRole></p><p>While you&rsquo;re here, you can see that the permissions of this role are defined by the policy &ldquo;ConfigAutoRemediationPolicy&rdquo;. Which makes sense given what we are tying to do. If you have time you gan dig in a bit deeper to see the exact permissions this policy grants.</p><h4 id=2-select-the-s3-bucket-server-side-encryption-enabled-rule>2. Select the s3-bucket-server-side-encryption-enabled rule</h4><p>Now that you have the ARN it&rsquo;s time to head back to AWS Config. From the AWS Config Console select <strong>Rules</strong> on the navigation menu on the left.</p><p><img src=clue3-config-rules.png alt=AutomationServiceRole></p><p>From here you will see the three rules you implemented, and that the <strong>Remediation action</strong> for each is &ldquo;Not set&rdquo;. Click on s3-bucket-server-side-encryption-enabled.</p><h4 id=3-configure-auto-remediation>3. Configure Auto remediation</h4><p>From the rules page, click on the <strong>Edit</strong> or <strong>Actions</strong> button at the top right.</p><p><img src=clue3-bucket-encryption.png alt=AutomationServiceRole></p><p>Complete the remediation section of the form as per below.</p><p><strong>Remediation Action</strong> must be set to AWS-EnablesS3BucketEncryption.</p><p>If you see an Auto Remediation Yes / No selection - ensure Yes is selected.</p><p>The <strong>Resource ID Parameter</strong> must be set to BucketName. This tells Config that the Bucket Name will be variable.</p><p>The three main parameters are;</p><ul><li><strong>AutoAssumeRole</strong> This is the role (and associated permissions) that you copies in step 1. This allows the auto remediation to happen, an <a href=https://docs.aws.amazon.com/general/latest/gr/aws-arns-and-namespaces.html target=_blank>Amazon Resource Name</a> (ARN) is used to uniquely identify the role.</li><li><strong>BucketName</strong> The name of the bucket to apply the auto remediation to. You will should see this is greyed out because you selected BucketName as the <strong>Resource ID Parameter</strong>. You do not want to specify a particular bucket because we want the remediation to be applied to all buckets.</li><li><strong>SSEAlgorthum</strong> The encryption algorithm, this must be set to AES256.</li></ul><p><img src=clue3-config-edit-remediation.png alt=AutomationServiceRole></p><p>Click <span style="display:inline;font-weight:700;padding:5px 15px;color:#fff;border-style:solid;border-width:1px;background-color:#f90">Save changes</span></p><p>You will then be taken back to the Rules page where you will see the <strong>Remediation action</strong> has been set but the Rule is still showing noncompliant resource(s). It will take around 5-10 minutes for the remediation actions to run and for the config status to be refreshed. Move on to the next step and we&rsquo;ll come back and check later.</p></div></div><div id=navigation><a class="nav nav-prev" href=/risk-lab-site/4-detective-controls-config/4-rule-scope/ title="Rule Scope"><i class="fa fa-chevron-left"></i></a><a class="nav nav-next" href=/risk-lab-site/4-detective-controls-config/6-timelines/ title="Explore Timelines" style=margin-right:0><i class="fa fa-chevron-right"></i></a></div></section><footer class=footline><div style=left:-1000px;overflow:scroll;position:absolute;top:-1000px;border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px><div style=border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px></div></div><script src=/risk-lab-site/js/clipboard.min.js?1615966480></script><script src=/risk-lab-site/js/perfect-scrollbar.min.js?1615966480></script><script src=/risk-lab-site/js/perfect-scrollbar.jquery.min.js?1615966480></script><script src=/risk-lab-site/js/jquery.sticky.js?1615966480></script><script src=/risk-lab-site/js/featherlight.min.js?1615966480></script><script src=/risk-lab-site/js/highlight.pack.js?1615966480></script><script>hljs.initHighlightingOnLoad();</script><script src=/risk-lab-site/js/modernizr.custom-3.6.0.js?1615966480></script><script src=/risk-lab-site/js/learn.js?1615966480></script><script src=/risk-lab-site/js/hugo-learn.js?1615966480></script><link href=/risk-lab-site/mermaid/mermaid.css?1615966480 rel=stylesheet><script src=/risk-lab-site/mermaid/mermaid.js?1615966480></script><script>mermaid.initialize({startOnLoad:true});</script></footer></body></html>